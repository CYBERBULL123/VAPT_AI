<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ project_name }} - Risk Assessment Report</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="../../frontend/assests/report.css"> <!-- Correct relative path -->
</head>
<body>
    <!-- Dark Mode Toggle -->
    <button class="theme-toggle" onclick="toggleTheme()">Toggle Dark Mode</button>

    <header class="fade-in">
        <h1>{{ project_name }} - Risk Assessment Report</h1>
        <p><strong>Client Name:</strong> {{ client_name }}</p>
        <p><strong>Assessment Date:</strong> {{ assessment_date }}</p>
        <p><strong>Assessor:</strong> {{ assessor_name }}</p>
    </header>

    <div class="container fade-in">
        <!-- Executive Summary -->
        <section>
            <h2>Executive Summary</h2>
            <div class="highlight">
                <p>{{ summary }}</p>
                <p>
                    This section provides a high-level overview of the risk assessment, including the objectives, 
                    methodology, and key findings. It is designed to give stakeholders a quick understanding of the 
                    risks identified and their potential impact on the organization.
                </p>
            </div>
        </section>

        <!-- Introduction -->
        <section>
            <h2>Introduction</h2>
            <div class="highlight">
                <p>
                    This section introduces the purpose and scope of the risk assessment. It outlines the goals of 
                    the assessment, the methodologies used, and the importance of identifying and mitigating risks 
                    to ensure organizational resilience.
                </p>
                <p>{{ introduction }}</p>
            </div>
        </section>

        <!-- Risk Findings -->
        <section>
            <h2>Risk Findings</h2>
            <div class="highlight">
                <p>
                    This section details the risks identified during the assessment. Each risk is categorized by 
                    severity and likelihood, and includes a description of the potential impact. Findings are 
                    prioritized to help focus mitigation efforts.
                </p>
            </div>
            {% if findings %}
                <table>
                    <thead>
                        <tr>
                            <th>Risk Title</th>
                            <th>Description</th>
                            <th>Severity</th>
                            <th>Likelihood</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for finding in findings %}
                        <tr>
                            <td>{{ finding.title }}</td>
                            <td>{{ finding.description }}</td>
                            <td class="severity {{ finding.severity|lower }}">{{ finding.severity }}</td>
                            <td>{{ finding.likelihood }}</td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
            {% else %}
                <p>No risk findings recorded.</p>
            {% endif %}
        </section>

        <!-- Business Impact Analysis -->
        <section>
            <h2>Business Impact Analysis</h2>
            <div class="highlight">
                <p>
                    This section evaluates the potential impact of the identified risks on the organization, 
                    including financial, operational, and reputational consequences. It helps stakeholders 
                    understand the severity of the risks and their implications.
                </p>
                <p>{{ business_impact }}</p>
                {% if impacts %}
                    <h3>Critical Business Impacts:</h3>
                    <ul>
                    {% for impact in impacts %}
                        <li>{{ impact }}</li>
                    {% endfor %}
                    </ul>
                {% endif %}
            </div>
        </section>

        <!-- Risk Analysis -->
        <section>
            <h2>Risk Analysis</h2>
            <div class="highlight">
                <p>
                    This section provides a detailed analysis of the identified risks, including their likelihood 
                    and potential impact. It helps prioritize risks for mitigation and provides a basis for 
                    decision-making.
                </p>
                <p>{{ risk_analysis }}</p>
                {% if risk_likelihood and risk_impact %}
                    <p><strong>Overall Risk Likelihood:</strong> {{ risk_likelihood }}</p>
                    <p><strong>Overall Risk Impact:</strong> {{ risk_impact }}</p>
                {% endif %}
            </div>
        </section>

        <!-- Mitigation Strategies -->
        <section>
            <h2>Mitigation Strategies</h2>
            <div class="highlight">
                <p>
                    This section provides actionable recommendations to mitigate the identified risks. 
                    Recommendations are prioritized based on their potential impact and feasibility, and include 
                    both short-term and long-term solutions.
                </p>
                <p>{{ mitigation_summary }}</p>
            </div>
            {% if strategies %}
                <ul>
                {% for strategy in strategies %}
                    <li>
                        <div class="highlight">
                            <strong>{{ strategy.title }}</strong>
                            <p>{{ strategy.description }}</p>
                            <p><strong>Priority:</strong> {{ strategy.priority }}</p>
                            <p><strong>Timeline:</strong> {{ strategy.timeline }}</p>
                        </div>
                    </li>
                {% endfor %}
                </ul>
            {% else %}
                <p>No mitigation strategies defined.</p>
            {% endif %}
        </section>

        <!-- Compliance Alignment -->
        {% if compliances %}
            <section>
                <h2>Compliance Alignment</h2>
                <div class="highlight">
                    <p>
                        This section outlines how the risk assessment aligns with relevant compliance standards 
                        and regulatory requirements. It ensures that the organization is aware of its compliance 
                        obligations and how they relate to the identified risks.
                    </p>
                    <p>This assessment aligns with the following compliance standards:</p>
                    <ul>
                    {% for compliance in compliances %}
                        <li>{{ compliance }}</li>
                    {% endfor %}
                    </ul>
                </div>
            </section>
        {% endif %}

        <!-- Additional Notes -->
        {% if additional_notes %}
            <section>
                <h2>Additional Notes</h2>
                <div class="highlight">
                    <p>
                        This section includes any additional information or observations that may be relevant to 
                        the risk assessment. It provides context or clarifications that support the findings and 
                        recommendations.
                    </p>
                    <p>{{ additional_notes }}</p>
                </div>
            </section>
        {% endif %}
    </div>

    <footer class="fade-in">
        <p>Generated by <strong>OxSecure Intelligence</strong> on {{ assessment_date }}</p>
        <p>Securing Tomorrow, Today</p>
    </footer>

    <script>
        // Dark Mode Toggle
        function toggleTheme() {
            const body = document.body;
            body.setAttribute('data-theme', body.getAttribute('data-theme') === 'dark' ? 'light' : 'dark');
        }
    </script>
</body>
</html>